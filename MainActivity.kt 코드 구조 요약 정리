MainActivity.kt는 알약 인식 애플리케이션의 전체 기능 흐름을 통합 관리하는 핵심 파일로,
카메라 촬영 → OCR 전처리 → 서버 분석 → 결과 화면 표시까지의 과정을 계층적으로 분리된 구조로 구현하고 있다.

코드 초반부에는 서버와 주고받는 데이터를 정의하는 DTO(Data Transfer Object) 와 UI 표시를 위한 도메인 모델이 분리되어 선언되어 있다.
PillRecognitionResponse는 서버의 알약 인식 결과를 그대로 매핑하는 모델이며, PillDetail은 결과 화면에 표시하기에 적합한 형태로 데이터를 정리한 UI 전용 모델이다.
이를 통해 데이터 계층과 화면 계층을 분리하여, 향후 API 확장이나 DB 연동 시 UI 수정이 최소화되도록 설계하였다.

네트워크 통신은 Retrofit 기반으로 구성되며, 알약 이미지를 multipart 형식으로 서버에 전송하는 API를 PillApiService에서 명확히 정의한다.
실제 네트워크 호출은 Repository 계층(RetrofitPillRepository)을 통해 수행되어, UI와 네트워크 구현이 직접 결합되지 않도록 구조화되어 있다.

알약 분석 과정의 상태는 PillUiState sealed class로 관리된다. Idle, Loading, Success, Error 상태를 명확히 구분하여, Compose UI가 상태 변화에 따라
자동으로 화면을 갱신하도록 구성하였다. 이 상태를 실제로 제어하는 주체는 PillRecognitionViewModel이며, 비동기 네트워크 요청과 결과 처리를 담당한다.

MainActivity는 앱의 진입점으로, 카메라 권한을 요청한 뒤 홈 화면과 카메라 인식 화면 사이의 전환만을 관리한다. 복잡한 UI 구성은 직접 담당하지 않고,
Composable 함수로 위임함으로써 Activity의 책임을 최소화하였다.

실제 화면 흐름은 AppRoot Composable에서 관리되며, 카메라 → 미리보기 → 결과 화면 전환을 CameraRoute sealed class로 제어한다.
이를 통해 Navigation 라이브러리를 사용하지 않고도 단일 화면 흐름을 직관적으로 관리할 수 있도록 설계하였다.

카메라 화면에서는 CameraX를 사용해 실시간 프리뷰와 사진 촬영을 수행하고, 촬영된 이미지는 파일로 저장되어 미리보기 화면으로 전달된다.
미리보기 화면에서는 ML Kit 기반 OCR을 먼저 수행한 뒤, 해당 결과를 보조 정보로 활용해 서버 알약 분석을 요청한다.

결과 화면은 PillDetail 모델을 기반으로 효능, 용법, 성분, 부작용, 금기, 상호작용 정보를 카드 형태로 표시하며,
카메라 인식 결과와 검색 결과 모두에서 재사용 가능한 구조로 설계되었다.

종합하면, MainActivity.kt는 카메라 입력 → OCR 전처리 → 서버 기반 알약 인식 → 상태 기반 UI 렌더링의 전 과정을 Compose 중심의 단일 흐름 구조로 정리한 파일이며,
UI·비즈니스 로직·네트워크 계층을 명확히 분리한 확장 가능한 설계를 갖춘 것이 핵심 특징이다.
